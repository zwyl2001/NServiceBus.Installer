<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional //EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0042)http://nservicebus.com/nsb40betanotes.aspx -->
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema/"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>
	NServiceBus 4.0 Beta Release Notes
</title><link href="./NServiceBus 4.0 Beta Release Notes_files/style.css" rel="Stylesheet" type="text/css"><link href="./NServiceBus 4.0 Beta Release Notes_files/NSBStyle.css" rel="Stylesheet" type="text/css"><link href="./NServiceBus 4.0 Beta Release Notes_files/global.css" rel="Stylesheet" type="text/css"><link href="./NServiceBus 4.0 Beta Release Notes_files/tooltipster.css" rel="stylesheet" type="text/css"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta content="en" http-equiv="content-language"><meta content="See how easy distributed systems development can be - on-premise and in the cloud, working on your machine in under 5 minutes." name="description"><meta content="soa, esb, eda, event, architecture, service, bus, cloud, loose coupling, workflow, replication, synchronization" name="keywords"><meta content="NServiceBus" property="og:title"><meta content="website" property="og:type"><meta content="NServiceBus" property="og:site_name"><meta content="http://www.NServiceBus.com" property="og:url"><meta content="http://www.nservicebus.com/img/nServiceBus_Logo.png" property="og:image"><meta content="The most popular open-source service bus for .NET. Working pub/sub messaging in under 5 minutes." property="og:description"><meta content="udidahan" property="fb:admins">
<script type="text/javascript" async="" src="./NServiceBus 4.0 Beta Release Notes_files/ga.js"></script><script src="./NServiceBus 4.0 Beta Release Notes_files/jquery-1.8.2.min.js" type="text/javascript"></script>

       
<script src="./NServiceBus 4.0 Beta Release Notes_files/jquery.fancybox-1.3.1.pack.js" type="text/javascript"></script>
<link href="./NServiceBus 4.0 Beta Release Notes_files/jquery.fancybox-1.3.1.css" media="screen" rel="stylesheet" type="text/css">
<script type="text/javascript">
    $(document).ready(function () {
        $('#NSBSearchQuery').keyup(function (event) {
            if (event.keyCode == 13) {
                $("#NSBSearchExecute").click();
            }
        });
        $('#NSBSearchExecute').click(function () {
            window.location = "/Search.aspx?query=" + encodeURIComponent($('#NSBSearchQuery').val());
        });
    });

</script>


	<style type="text/css">
        #IssueLicense
        {
            text-decoration: underline;
        }
    </style>


<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20451773-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl.' : 'http://') + 'google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<script type="text/javascript">
function getCookie(NameOfCookie)
{
    if (document.cookie.length > 0) 
	{ 
		begin = document.cookie.indexOf(NameOfCookie+"="); 
	    if (begin != -1)
	   	{ 
			begin += NameOfCookie.length+1; 
	      	end = document.cookie.indexOf(";", begin);
			if (end == -1) end = document.cookie.length;
      		return unescape(document.cookie.substring(begin, end));       
      	} 
	}
	return null;  
}
</script></head>


    
<body class="NSBPage">
	<div class="NSBMainContainer">
		<div class="NSBHeaderBlock">	
			<div class="NSBHeaderContainer NSBAlignMiddle">	
				<div class="NSBLogoContainer">
						<a class="NSBLogo" title="Home" href="http://nservicebus.com/"><img class="NSBLogoImage" alt="Home" style="border: none;" src="./NServiceBus 4.0 Beta Release Notes_files/NServiceBusLogo_black.png"></a>
				</div>
				<div class="NSBHeaderTopContent">
					<div class="NSBSearchBlock">
					     <div class="NSBSearchForm">
	                    	<div class="NSBSearchLine">
		                    	<input id="NSBSearchQuery" class="NSBSearchQuery" name="NSBSearchQuery" title="Enter the terms you wish to search for." type="text" maxlength="128" value="Search NServiceBus.com" onblur="this.value = this.value || &#39;Search NServiceBus.com&#39;; this.style.color = &#39;#656565&#39;;" onfocus="if(this.value==&#39;Search NServiceBus.com&#39;) {this.value=&#39;&#39;;} this.style.color = &#39;#000&#39;;" style="left: 0px; top: 0px; outline:none;">
			                    <input id="NSBSearchExecute" class="NSBSearchExecute" name="NSBSearchExecute" alt="Search" value="Search" src="./NServiceBus 4.0 Beta Release Notes_files/NSBSearchIcon.png" type="image">
		                    </div>
	                    </div>
					</div>
					<div class="NSBSmallMenu" id="NSBSmallMenu">
						<label>US Toll Free &nbsp;&nbsp;(888) 495-6156&nbsp;</label> | &nbsp; 
						<a href="http://nservicebus.com/Community.aspx">Community</a> &nbsp; | &nbsp;
						<a href="http://nservicebus.com/ContactUs.aspx">Contact Us</a>
					</div>
				</div>
				<div class="NSBHeaderBottomContent">
					<div class="NSBMainMenu" id="NSBMainMenu">
						<a href="http://nservicebus.com/Solution.aspx">Solutions</a> &nbsp;&nbsp; | &nbsp;&nbsp;
						<a href="http://nservicebus.com/Downloads.aspx">Downloads</a> &nbsp;&nbsp; | &nbsp;&nbsp;
						<a href="http://nservicebus.com/License.aspx">License</a> &nbsp;&nbsp; | &nbsp;&nbsp; 
						<a href="http://nservicebus.com/Documentation.aspx">Documentation</a> &nbsp;&nbsp; | &nbsp;&nbsp; 
						<a href="http://nservicebus.com/Training.aspx">Training</a> &nbsp;&nbsp; | &nbsp;&nbsp; 
						<a href="http://nservicebus.com/Support.aspx">Support</a> &nbsp;&nbsp; | &nbsp;&nbsp; 
						<a href="http://nservicebus.com/Customers.aspx">Customers</a> &nbsp;&nbsp; | &nbsp;&nbsp; 
						<a href="http://nservicebus.com/About.aspx">About Us</a> 
					</div>
				</div>
			</div>
		</div>
		
		<div class="NSBContent">
			<div class="NSBContentContainer NSBAlignMiddle">
				
	<script type="text/javascript">
		_gaq.push(['_trackEvent', 'Page Viewed', 'NSB 4.0 Beta Release Notes']);
	</script>
    <h1>NServiceBus v4.0 Beta Release Notes</h1>
   	<h3>License and Usage</h3>
	<div style="width:900px; position:relative; float:left; margin-left:50px; left: 0px; top: 0px;">
	<div style="background-color:#CCCCCC;">
	<div style="padding:5px 5px 5px 5px">
	<div style="background-color:black;padding:1px 1px 1px 1px">
	<div style="background-color:#CCCCCC;padding:10px 10px 10px 10px">
	<b>NServiceBus V4 beta release is provided with an unlimited license for 14 days. 
		Additional extended usage can be provided upon request.<br><br>
		Please use
	NServiceBus v4 beta release only for your personal learning, evaluation, and non-production use.<br><br>
		<a href="http://github.com/NServiceBus/NServiceBus/issues?direction=asc&milestone=26&page=1&state=closed" target="_blank">A detailed list of all the changes.</a></b><br>
	</div>	
	</div>	
	</div>
	</div>
	</div>

    <h3>Compatibility and Upgrades</h3>
	<div style="margin-left:20px;"> 
		<b>Prerequisite: NServiceBus v4.0 requires RavenDB 2.0.0.2261 or later</b>
		<div style="margin-left:30px;margin-right:30px;">
			In order to run 
			NServiceBus v4.0 in beta (non-production environment), RavenDB v2.0 must be installed on the machine 
			on which NServiceBus v4.0 is tested. <br><br>NServiceBus installer 
			will automaticly install a RavenDB v2.0 if there is no existing and 
			active installation of RavenDB v2.0 on the machine. <br>it is 
			possible to manualy validate the current RavenDB installed version 
			by connecting to the RavenDB instance (
			http://localhost:8080 ) and 
			locating the bottom status bar where server and client build numbers 
			are noted, build numbers prior to 2000 indecates a RavenDB earlier than 
			v2.0.<br><br>If the NServiceBus v4.0 installer finds a RavenDB 
			version prior to v2.0 on the target machine a new instance of RavenDB 
			v2.0 will be installed and no intact will be made to the existing 
			instance.</div>
	</div>
	<div style="margin-top:10px;margin-left:20px;">
	<b>NServiceBus v4.0 is not compatible with NServiceBus v2.6 (or earlier)</b>
	<div style="margin-left:30px;margin-right:30px;">
		As you can see, 
		a large number of features were added to NServiceBus. As a result, NServiceBus v4.0 is not compatible with NServiceBus v2.6. Furthermore, only messages marked as events (IEvent or DefiningEventsAs()) will be auto-subscribed.
	</div>
	</div>
	
	<div style="margin-top:10px;margin-left:20px;">
	<b>PowerShell cmdlets - breaking changes:</b>
	<div style="margin-left:30px;margin-right:30px;">
		NServiceBus.Host no longer supports /installinfrastructure. Use Powershell cmdlets instead.<br>
		Powershell cmdlets have been renamed so that they do not clash with any existing cmdlets. See details below.
	</div>
	</div>

	<div style="margin-top:10px;margin-left:20px;">
	<b>Autosubscriptions</b>
	<div style="margin-left:30px;margin-right:30px;">
		Only messages marked as events (IEvent or DefiningEventsAs()) will be auto-subscribed.
	</div>
	</div>

	<div style="margin-top:10px;margin-left:20px;">
	<b>Default transaction isolation level</b>
	<div style="margin-left:30px;margin-right:30px;">
		Default transaction isolation level is now ReadCommitted. <br>
		To revert to Serializable use:<br>
		</div>
<pre class="csharpcode" style="border:1px solid Black;">
   Configure
      .Transactions
      .Advanced(settings =&gt; settings.IsolationLevel(IsolationLevel.Serializable));
   
</pre>
	</div>

	<div style="margin-top:20px;">
	<h3>New Transports Support and Configuration</h3>
	<div style="margin-left:30px;margin-right:30px;">
		Four transports are now out of the box (SqlServer, MSMQ, ActiveMQ and RabbitMQ) 
		with more to come.<br><br>
		<b>Four new transport samples</b> were added to the NServiceBus samples, illustrating how to configure the new transports:<br>
		<ul>
			<li style="list-style-type: square;">Messaging.ActiveMQ</li>
			<li style="list-style-type: square;">Messaging.RabbitMQ</li>
			<li style="list-style-type: square;">Messaging.SqlServer</li>
			<li style="list-style-type: square;">Messaging.MSMQ</li>
		</ul>
		<a href="https://github.com/NServiceBus/NServiceBus/tree/develop/Samples">These samples are online</a> and included in the MSI installation samples sub-directory.
	</div>

	<div style="margin-left:30px;margin-top:20px;">
		<b>New configuration APIs</b> were added to simplify the transports configuration and make it consistent across all transports. In your config file, specify a connection string, e.g.:
		<pre class="csharpcode" style="border:1px solid Black;"> 
 <span class="kwrd">&lt;</span><span class="html">connectionStrings</span><span class="kwrd">&gt;</span>

   <span class="rem">&lt;!-- MSMQ --&gt;</span>
   <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">name</span><span class="kwrd">="NServiceBus/Transport"</span> <span class="attr">
        connectionString</span><span class="kwrd">="deadLetter=true;journal=true;useTransactionalQueues=true;cacheSendConnection=true"</span><span class="kwrd">/&gt;</span>
			
   <span class="rem">&lt;!-- ActiveMQ --&gt;</span> 
   <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">name</span><span class="kwrd">="NServiceBus/Transport"</span> <span class="attr">
        connectionString</span><span class="kwrd">="ServerUrl=activemq:tcp://localhost:61616"</span><span class="kwrd">/&gt;</span>
			
   <span class="rem">&lt;!-- RabbitMQ--&gt;</span> 
   <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">name</span><span class="kwrd">="NServiceBus/Transport"</span> <span class="attr">
        connectionString</span><span class="kwrd">="host=localhost"</span><span class="kwrd">/&gt;</span>
		
   <span class="rem">&lt;!-- SqlServer --&gt;</span>
   <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">name</span><span class="kwrd">="NServiceBus/Transport"</span> <span class="attr">
        connectionString</span><span class="kwrd">="Data Source=.\SQLEXPRESS;Initial Catalog=nservicebus;Integrated Security=True"</span><span class="kwrd">/&gt;</span>

 <span class="kwrd">&lt;/</span><span class="html">connectionStrings</span><span class="kwrd">&gt;</span>
		</pre>
		<br>
			You then have 
		two options to specify the transport:<br>
		<ul>
			<li>You can specify it as part of the IConfigureThisEndpoint class declaration, e.g.:</li>

		</ul>
		<pre class="csharpcode" style="border:1px solid Black;">		
    <span class="kwrd">public</span> <span class="kwrd">class</span> EndpointConfig : IConfigureThisEndpoint, AsA_Server, <strong>UsingTransport&lt;RabbitMQ&gt;</strong>

</pre>
			<li>Or you can specify it in the IWantCustomInitialization Init method, e.g.:</li>
		<pre class="csharpcode" style="border:1px solid Black;">		
    <span class="kwrd">public</span> <span class="kwrd">class</span> EndpointConfig : IConfigureThisEndpoint, AsA_Server, IWantCustomInitialization
    {
       <span class="kwrd">public</span> <span class="kwrd">void</span> Init()
       {
          Configure.With()
             .DefaultBuilder()
             <strong>.UseTransport&lt;RabbitMQ&gt;()</strong> 
       }
    }

</pre>
	</div>
	
	<div style="margin-left:30px;margin-top:20px;">
		<b>Three new nuget packages for the new transports are also available:</b><br>
		<ul>
			<li style="list-style-type: square;"><a href="https://nuget.org/packages/NServiceBus.SqlServer/" target="_blank">NServiceBus.SqlServer</a></li>
			<li style="list-style-type: square;"><a href="https://nuget.org/packages/NServiceBus.ActiveMQ/" target="_blank">NServiceBus.ActiveMQ</a></li>
			<li style="list-style-type: square;"><a href="https://nuget.org/packages/NServiceBus.RabbitMQ/" target="_blank">NServiceBus.RabbitMQ</a></li>
		</ul>
		<div style="margin-left:30px;">
		<b>Example of how to install the NServiceBus.ActiveMQ package:</b><br>
		(Note that the Nuget packages are defined as pre-release. They will not be listed unless you tell Nuget to show&nbsp; pre-release packages using the <em>–Prerelease</em>&nbsp; or<em> -Pre</em> alias flags.)<br>
        <div class="nuget-badge">
	<p>
		<code>PM&gt; Install-Package NServiceBus.ActiveMQ -Pre<br>
		</code></p>
</div>
</div>
	</div>
	<div style="margin-left:30px;margin-top:20px;">
		<b>New Transports DLLs</b><br>
		Add a reference to the new transport DLL’s (in the Binaries directory):<br>
		<ul>
			<li style="list-style-type: square;">NServiceBus.Transports.RabbitMQ.dll</li>
			<li style="list-style-type: square;">NServiceBus.Transports.SQlServer.dll</li>
			<li style="list-style-type: square;">NServiceBus.Transports.ActiveMQ.dll</li>
		</ul>
		(MSMQ is currently in NServiceBus.Core.dll and does not require any additional reference. Nuget adds the reference automatically.)
	</div>
	</div>
	
	<div style="margin-top:20px;">
		<h3>Configuration Changes</h3>
	<div style="margin-left:30px;">
		<b>XmlMessageSerializer</b> now supports not wrapping messages in a &lt;messages&gt; element for single messages. This makes interoperability with other systems easier.<br>
		To turn on this feature use:<br>
		<pre class="csharpcode" style="border:1px solid Black;">
    .XmlSerializer( dontWrapSingleMessages:<span class="kwrd">true</span> )

</pre>
	</div>
	<div style="margin-left:30px;margin-top:20px;">
		<b>MsmqTransportConfig</b> section has been deprecated in favour of TransportConfig section, e.g.:<br>
		<pre class="csharpcode" style="border:1px solid Black;">
    <span class="kwrd">&lt;</span><span class="html">section</span> <span class="attr">name</span><span class="kwrd">="TransportConfig"</span> <span class="attr">type</span><span class="kwrd">="NServiceBus.Config.TransportConfig, NServiceBus.Core"</span> <span class="kwrd">/&gt;</span>

    <span class="kwrd">&lt;</span><span class="html">TransportConfig</span> <span class="attr">MaximumConcurrencyLevel</span><span class="kwrd">="10"</span> <span class="attr">MaxRetries</span><span class="kwrd">="3"</span> <span class="attr">MaximumMessageThroughputPerSecond</span><span class="kwrd">="10"</span> <span class="kwrd">/&gt;</span>

</pre>
	</div>
	<div style="margin-left:30px;margin-top:20px;">
		<b>INeedToInstallSomething</b> is now resolved via the container
	</div>

	<div style="margin-left:30px;margin-top:20px;">
	<b>NHibernate Configuration</b><br>
	NHibernate settings have been simplified use as follows:<br>
	<pre class="csharpcode" style="border:1px solid Black;">	
  <span class="kwrd">&lt;</span><span class="html">appSettings</span><span class="kwrd">&gt;</span>
    <span class="rem">&lt;!-- dialect is the only required NHibernate property --&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">key</span><span class="kwrd">="NServiceBus/Persistence/NHibernate/dialect"</span> <span class="attr">value</span><span class="kwrd">="NHibernate.Dialect.MsSql2008Dialect"</span><span class="kwrd">/&gt;</span>
    <span class="rem">&lt;!-- other optional settings examples --&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">key</span><span class="kwrd">="NServiceBus/Persistence/NHibernate/connection.provider"</span> <span class="attr">value</span><span class="kwrd">="NHibernate.Connection.DriverConnectionProvider"</span><span class="kwrd">/&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">key</span><span class="kwrd">="NServiceBus/Persistence/NHibernate/connection.driver_class"</span> <span class="attr">value</span><span class="kwrd">="NHibernate.Driver.Sql2008ClientDriver"</span><span class="kwrd">/&gt;</span>
    <span class="rem">&lt;!-- For more setting see http://www.nhforge.org/doc/nh/en/#configuration-hibernatejdbc and</span>
  <span class="rem">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.nhforge.org/doc/nh/en/#configuration-optional --&gt;</span>
  <span class="kwrd">&lt;/</span><span class="html">appSettings</span><span class="kwrd">&gt;</span> 
  <span class="kwrd">&lt;</span><span class="html">connectionStrings</span><span class="kwrd">&gt;</span>
    <span class="rem">&lt;!-- Default connection string for all Nhibernate/Sql persisters --&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">name</span><span class="kwrd">="NServiceBus/Persistence"</span> <span class="attr">
         connectionString</span><span class="kwrd">="Data Source=.\SQLEXPRESS;Initial Catalog=nservicebus;Integrated Security=True"</span> <span class="kwrd">/&gt;</span>
       
    <span class="rem">&lt;!-- Optional overrides per persister --&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">name</span><span class="kwrd">="NServiceBus/Persistence/NHibernate/Timeout"</span> <span class="attr">
         connectionString</span><span class="kwrd">="Data Source=.\SQLEXPRESS;Initial Catalog=timeout;Integrated Security=True"</span> <span class="kwrd">/&gt;</span>
       
    <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">name</span><span class="kwrd">="NServiceBus/Persistence/NHibernate/Saga"</span> <span class="attr">
         connectionString</span><span class="kwrd">="Data Source=.\SQLEXPRESS;Initial Catalog=sagas;Integrated Security=True"</span> <span class="kwrd">/&gt;</span>
       
    <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">name</span><span class="kwrd">="NServiceBus/Persistence/NHibernate/Subscription"</span> <span class="attr">
         connectionString</span><span class="kwrd">="Data Source=.\SQLEXPRESS;Initial Catalog=subscription;Integrated Security=True"</span> <span class="kwrd">/&gt;</span>
       
    <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">name</span><span class="kwrd">="NServiceBus/Persistence/NHibernate/Gateway"</span> <span class="attr">
         connectionString</span><span class="kwrd">="Data Source=.\SQLEXPRESS;Initial Catalog=gateway;Integrated Security=True"</span> <span class="kwrd">/&gt;</span>
       
    <span class="kwrd">&lt;</span><span class="html">add</span> <span class="attr">name</span><span class="kwrd">="NServiceBus/Persistence/NHibernate/Distributor"</span> <span class="attr">
         connectionString</span><span class="kwrd">="Data Source=.\SQLEXPRESS;Initial Catalog=distributor;Integrated Security=True"</span> <span class="kwrd">/&gt;</span>
       
  <span class="kwrd">&lt;/</span><span class="html">connectionStrings</span><span class="kwrd">&gt;</span>

</pre>
	</div>
	<div style="margin-left:30px;margin-right:30px;margin-top:20px;">
		<b>Performance Counters</b><br>
		New throughput performance counters and updated performance counters are now available:<br><br>
		<img src="./NServiceBus 4.0 Beta Release Notes_files/nsb40perfcounter.png" alt="">
	</div>	
	<div style="margin-left:30px;margin-right:30px;margin-top:20px;">
		<b>NServiceBus license installed per machine</b><br>
		Licenses can now be installed in HKLM, allowing you to install one license per server instead of installing a license per endpoint or per windows account.<br><br>
		Sample usage:<br>
		</div>	
		<div style="margin-left:30px; background:white;padding:10px 10px 10px 10px; margin-top:5px; color:black;border:1px solid Black;">
			LicenseInstaller.exe -m C:\License.xml
		</div>

	<div style="margin-left:30px;margin-top:20px;">
	<b>Powershell cmdlets Updates</b><br>
	    NServiceBus
	Powershell cmdlets have been moved to NServiceBus.PowerShell.dll, so to import it run: 
        <div class="nuget-badge">
<p><code>PM&gt; Import-Module .\NServiceBus.PowerShell.dll</code></p>
</div>
        NServiceBus Powershell cmdlets have been renamed so that they do not clash with any existing cmdlets:<br>
	
	<ul>
		<li style="list-style-type: square;">Installs a NServiceBus license file.
							 				<div style="background:white;padding:10px 10px 10px 10px; margin-top:5px; color:black;border:1px solid Black;">	
											 Install-NServiceBusLicense</div></li>
		<li style="list-style-type: square;margin-top:10px;">Displays all messages in a queue.
											<div style="background:white;padding:10px 10px 10px 10px; margin-top:5px; color:black;border:1px solid Black;">
										     Get-NServiceBusMSMQMessage</div></li>
		<li style="list-style-type: square;margin-top:10px;">Displays the NServiceBus installed version.
											<div style="background:white;padding:10px 10px 10px 10px; margin-top:5px; color:black;border:1px solid Black;">	
											 Get-NServiceBusVersion</div></li>
		<li style="list-style-type: square;margin-top:10px;">Installs DTC on the machine.
															<div style="background:white;padding:10px 10px 10px 10px; margin-top:5px; color:black;border:1px solid Black;">	
															 Install-NServiceBusDTC	</div></li>
		<li style="list-style-type: square;margin-top:10px;">Installs RavenDB on the machine.
															<div style="background:white;padding:10px 10px 10px 10px; margin-top:5px; color:black;border:1px solid Black;">
															 Install-NServiceBusRavenDB</div></li>
		<li style="list-style-type: square;margin-top:10px;">Installs NServiceBus performance counters on the machine.
															<div style="background:white;padding:10px 10px 10px 10px; margin-top:5px; color:black;border:1px solid Black;">
 															 Install-NServiceBusPerformanceCounters </div></li>
		<li style="list-style-type: square;margin-top:10px;">Installs MSMQ on the machine.
															<div style="background:white;padding:10px 10px 10px 10px; margin-top:5px; color:black;border:1px solid Black;">
															 Install-NServiceBusMSMQ</div></li>
		<li style="list-style-type: square;margin-top:10px;">Validates if DTC is installed and running on the machine.
															<div style="background:white;padding:10px 10px 10px 10px; margin-top:5px; color:black;border:1px solid Black;">
															 Test-NServiceBusDTCInstallation</div></li>
		<li style="list-style-type: square;margin-top:10px;">Ensures RavenDB is on the machine.
															<div style="background:white;padding:10px 10px 10px 10px; margin-top:5px; color:black;border:1px solid Black;">
															 Test-NServiceBusRavenDBInstallation</div></li>
		<li style="list-style-type: square;margin-top:10px;">Validates that NServiceBus performance counters are correctly installed on the machine.
															<div style="background:white;padding:10px 10px 10px 10px; margin-top:5px; color:black;border:1px solid Black;">
															 Test-NServiceBusPerformanceCountersInstallation</div></li>
		<li style="list-style-type: square;margin-top:10px;">Validates MSMQ is correctly installed on the machine.
															<div style="background:white;padding:10px 10px 10px 10px; margin-top:5px; color:black;border:1px solid Black;">
															 Test-NServiceBusMSMQInstallation</div></li>
		<li style="list-style-type: square;margin-top:10px;">Adds the required configuration section to the config file.
															<div style="background:white;padding:10px 10px 10px 10px; margin-top:5px; color:black;border:1px solid Black;">
															 Add-NServiceBusMessageForwardingInCaseOfFaultConfig</div></li>
        <li style="list-style-type: square;margin-top:10px;">Shows the default error and 
		audit queues.
															<div style="background:white;padding:10px 10px 10px 10px; margin-top:5px; color:black;border:1px solid Black;">
															 Get-NServiceBusLocalMachineSettings</div></li>
        <li style="list-style-type: square;margin-top:10px;">Allows specifying the default 
		error and audit queues.
															<div style="background:white;padding:10px 10px 10px 10px; margin-top:5px; color:black;border:1px solid Black;">
															 Set-NServiceBusLocalMachineSettings</div></li>
		<li style="list-style-type: square;margin-top:10px;"><b>NServiceBus.Host no longer supports /installinfrastructure - Use Powershell cmdlets instead</b></li>
	</ul>
	</div>
	<div style="margin-left:30px;margin-top:20px;">
	<b>New Endpoint Configuration API:</b><br>
	Sample usage:<br>
	<pre class="csharpcode" style="border:1px solid Black;">	
    Configure.Endpoint.AsSendOnly()
    &nbsp;&nbsp; .Advanced(settings =&gt; settings.DisableDurableMessages());

    Configure.Transactions.Enable() 
    &nbsp;&nbsp; .Advanced(settings =&gt; settings.IsolationLevel(IsolationLevel.Serializable)
    &nbsp;&nbsp; .DefaultTimeout(TimeSpan.FromSeconds(40)) 
    &nbsp;&nbsp; .DisableDistributedTransactions()); 
    </pre>
	</div>	
	<div style="margin-left:30px;margin-right:30px;margin-top:20px;">
	<b>Embedded RavenDB</b><br>
	RavenDB is not ilmerged anymore. (It is embedded instead, using <a href="https://github.com/Fody/Costura#readme" target="_blank">https://github.com/Fody/Costura#readme</a>).<br>
	The embedding enables client updates (but may require binding redirects). It also allows passing your own DocumentStore, 
		thereby providing full configuration flexibility.
        <br>
	</div>

	<div style="margin-left:30px;margin-right:30px;margin-top:20px;">
	<b>Audit and Error Queue Defaults</b><br>
	Server defaults for audit and error queues can now be specified in the registry
	    (see new Powershell cmdlet Get/Set-NServiceBusLocalMachineSettings above).</div>
</div>

	<div style="margin-top:20px;">
	<h3>Known issues:</h3>
	<div style="margin-left:30px;">

		<b>ActiveMQ requires enabling the Scheduler.</b><br> 
			&nbsp;&nbsp;&nbsp; 
			You can do this by setting <b>schedulerSupport="true"</b> attribute to the configuration in activemq.xml:
        <pre class="csharpcode" style="border:1px solid Black;">
 <span class="kwrd">&lt;</span><span class="html">broker</span> <span class="attr">xmlns</span><span class="kwrd">="http://activemq.apache.org/schema/core"</span> <span class="attr">brokerName</span><span class="kwrd">="localhost"</span> <span class="attr">dataDirectory</span><span class="kwrd">="${activemq.data}"</span> <span class="attr">schedulerSupport</span><span class="kwrd">="true"</span> <span class="kwrd">&gt;</span>

</pre>
		<b>ActiveMQ Client connection fails when hostname includes a hyphen</b>
		<br>&nbsp;&nbsp;&nbsp;
			(see <a href="https://issues.apache.org/jira/browse/AMQNET-399" target="_blank">https://issues.apache.org/jira/browse/AMQNET-399</a>).
		<br><br>
		<b>NMS Client for ActiveMQ</b><br>
		The release contains a custom build of Apache.NMS.ActiveMQ.1.5.6 client.<br>
		This custom build fixes the following issues:<br>
		<ul>
			<li><a href="https://issues.apache.org/jira/browse/AMQNET-412" target="_blank"><b>AMQNET-412</b>: Messages are enlisted to the wrong transaction</a></li>
			<li><a href="https://issues.apache.org/jira/browse/AMQNET-413" target="_blank"><b>AMQNET-413</b>: Message producers do not respect DTC Transactions correctly</a></li>
			<li><a href="https://issues.apache.org/jira/browse/AMQNET-414" target="_blank"><b>AMQNET-414</b>: Exception thrown when using DTC in multiple processes connected to the same broker</a></li>
			<li><a href="https://issues.apache.org/jira/browse/AMQNET-416" target="_blank"><b>AMQNET-416</b>: DTC Ressource ManagerID must be confugurable</a></li>
			<li><a href="https://issues.apache.org/jira/browse/AMQNET-417" target="_blank"><b>AMQNET-417</b>: DTC Recovery should be done once for each application start</a></li>
			<li><a href="https://issues.apache.org/jira/browse/AMQNET-418" target="_blank"><b>AMQNET-418</b>: Recovery File Logger does not support multiple concurrent transactions</a></li>
			<li><a href="https://issues.apache.org/jira/browse/AMQNET-419" target="_blank"><b>AMQNET-419</b>: The MessageConsumer sometimes does not send a RemoveInfo when closed</a></li>
			<li><a href="https://issues.apache.org/jira/browse/AMQNET-420" target="_blank"><b>AMQNET-420</b>: Session does not pass correct last delivered message in the Remove Info</a></li>
			<li><a href="https://issues.apache.org/jira/browse/AMQNET-421" target="_blank"><b>AMQNET-421</b>: Replace Mutex by lock</a></li>
			<li><a href="https://issues.apache.org/jira/browse/AMQNET-422" target="_blank"><b>AMQNET-422</b>: Added support for transactions for Asyncronous Listeners</a></li>
		</ul>
		<b>The custom build will be removed as soon as the official NMS client will be updated with the above fixes.</b>
		<br><br>
		<b>Installing RavenDB v2 on a machine that already has RavenDB v1.x</b><br>
		When installing NServiceBus v4.x on a machine where an instance of RavenDB v1.x exists (default listening on port 8080), the installer will identify the existing RavenDB instance and try to capture the next available port (e.g. 8081, 8082 etc.) instead of the default 8080 port. Once an available port is found, the installer installs RavenDB V2 instance as a new Windows service, side-by-side with the existing RavenDB v1.x installation.
		<br><br>
		By the end of the installation there will be two RavenDB services running 
		side by side on the machine:<br>
		<ul>
			<li>RavenDB</li>
			<li>RavenDB-v2</li>
		</ul> 	
		In case where there is a need to uninstall RavenDB v2 follow the following steps:
		<ul>
		<li>Open a command line and navigate to the following directory: <b><br>%Program Files%\NServiceBus.Persistence.v4</b></li>
		<li>Execute the following command:<br> <b>Raven.Server.exe –uninstall –service-name=RavenDB-v2</b></li>
		</ul>
		<br>
		<b>Transport samples do not work under Visual Studio 2010</b><br>	
		All the new transports introduced with NServiceBus 4.0 Beta <u><strong>do</strong></u> work with Visual Studio 2010, the supplied samples currently work only under Visual Studio 2012.
		
	</div>
	</div>
   

			</div>
		</div>
		
		<div class="NSBFooter">
			<div class="NSBFooterBlock">
				<div class="NSBFooterContainer NSBAlignMiddle">
					<div class="NSBSocialLinks">
						<map id="stayInTouch" name="stayInTouch">
							<area title="RSS" shape="rect" alt="RSS" coords="26,0,44,20" href="http://feeds.feedburner.com/NservicebusNews" target="_blank">
							<area title="Linkedin" shape="rect" alt="Linkedin" coords="49,0,67,20" href="http://www.linkedin.com/groups?about=&gid=128394" target="_blank">
							<area title="Twitter" shape="rect" alt="Twitter" coords="0,0,20,20" href="http://www.twitter.com/NServiceBus" target="_blank">
						</map>

						<img height="21" width="70" style="float:right; margin-top:-1px; border:none;" src="./NServiceBus 4.0 Beta Release Notes_files/social_media1.gif" usemap="#stayInTouch" alt="stayInTouch">
					</div>
					<div class="NSBFooterMenu" id="NSBFooterMenu">
						<a href="http://nservicebus.com/About.aspx">About NServiceBus</a> &nbsp;&nbsp; | &nbsp;&nbsp; 
						<a href="http://nservicebus.com/ContactUs.aspx">Contact Us</a> &nbsp;&nbsp; | &nbsp;&nbsp; 
						<a href="http://nservicebus.com/Privacy.aspx">Privacy</a> &nbsp;&nbsp; | &nbsp;&nbsp; 
						Follow us on: &nbsp;&nbsp; 
					</div>
					<div class="NSBCopyrightNotice">Copyright 2010-2013 NServiceBus. All rights reserved</div>
				</div>
			</div>
		</div>
	</div>



<div id="fancybox-tmp"></div><div id="fancybox-loading"><div></div></div><div id="fancybox-overlay"></div><div id="fancybox-wrap"><div id="fancybox-outer"><div class="fancy-bg" id="fancy-bg-n"></div><div class="fancy-bg" id="fancy-bg-ne"></div><div class="fancy-bg" id="fancy-bg-e"></div><div class="fancy-bg" id="fancy-bg-se"></div><div class="fancy-bg" id="fancy-bg-s"></div><div class="fancy-bg" id="fancy-bg-sw"></div><div class="fancy-bg" id="fancy-bg-w"></div><div class="fancy-bg" id="fancy-bg-nw"></div><div id="fancybox-inner"></div><a id="fancybox-close"></a><a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a><a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a></div></div></body></html>